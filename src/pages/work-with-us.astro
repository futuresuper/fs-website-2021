---
import BaseLayout from "@layouts/BaseLayout.astro";
import WorkWithUs from "@components/page/WorkWithUs.svelte";
import moment from "moment";

let careers = await Astro.glob("./career/*.md");
careers = careers.sort(
  (a, b) =>
    new Date(b.frontmatter.startDate).valueOf() -
    new Date(a.frontmatter.startDate).valueOf()
);
careers = careers.filter((c) => {
  return (
    moment(c.frontmatter.startDate).utc().isBefore(moment()) &&
    moment(c.frontmatter.endDate).utc().isAfter(moment())
  );
});
---

<BaseLayout
  title="Work With Us"
  description="We do financial services with a difference. Help us combat climate change and inequality."
  hideDescription
>
  <WorkWithUs careers={careers} client:load />
</BaseLayout>
